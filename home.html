<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Hub Pessoal - Preview</title>
    <!-- Carrega o Tailwind CSS via CDN para estilização -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Configuração do Tailwind (incluindo sua paleta de cores Dark Mode) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#B9314F', // Seu novo vermelho bordô principal
                        'secondary': '#31B994', // Verde-azulado complementar
                        'background': '#14141A', // Fundo Dark Mode (Quase Preto)
                        'card-bg': '#2A2A35', // Cor de fundo dos cartões/componentes
                        'text-light': '#f3f4f6', // Texto principal (Branco suave)
                        'text-secondary': '#9ca3af', // Texto auxiliar (Cinza suave)
                    },
                },
            },
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>

    <!-- Carrega as bibliotecas essenciais do React e Babel (para interpretar JSX) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Carrega as dependências do Firebase via UMD (para acesso global) -->
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>

</head>
<body class="bg-background min-h-screen">
    <!-- Onde o aplicativo React será renderizado -->
    <div id="root"></div>

    <script type="text/babel">
        // --- ADAPTAÇÃO PARA AMBIENTE CDN: VARIÁVEIS GLOBAIS E IMPORTS ---
        // Funções do React
        const { useState, useEffect } = React;

        // Funções do Firebase: Acesso explícito ao escopo global (window)
        // Isso é crucial para que o Babel reconheça essas funções corretamente.
        const initializeApp = window.initializeApp;
        const getAuth = window.getAuth;
        const getFirestore = window.getFirestore;
        const signInWithCustomToken = window.signInWithCustomToken;
        const signInAnonymously = window.signInAnonymously;
        const onAuthStateChanged = window.onAuthStateChanged;
        
        // Ícones Lucide substituídos por componentes SVG inline (para evitar importação)
        const IconSVG = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const HomeIcon = (props) => (
            <IconSVG {...props}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></IconSVG>
        );
        const BookOpen = (props) => (
            <IconSVG {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconSVG>
        );
        const Gamepad = (props) => (
            <IconSVG {...props}><path d="M6 10v4"/><path d="M2 12h4"/><path d="M18 12h4"/><path d="M19 15v-2"/><path d="M18 11v2"/><rect width="20" height="12" x="2" y="6" rx="6"/></IconSVG>
        );
        const Dumbbell = (props) => (
            <IconSVG {...props}><path d="m14.4 14.4-.8.8a2 2 0 0 1-2.83 0l-2.8-.2a2 2 0 0 0-1.27.7l-2.78 2.78a2 2 0 0 0 0 2.82l.8.8"/><path d="m14.4 14.4 4.8-4.8a2.91 2.91 0 0 0 0-4.14l-1.32-1.32a2.91 2.91 0 0 0-4.14 0l-4.8 4.8"/><path d="m14.4 14.4.8.8"/><path d="m14.4 14.4-.8-.8"/><path d="M21.2 3.8a2.89 2.89 0 0 0-4.13 0L15 5.86"/></IconSVG>
        );
        const List = (props) => (
            <IconSVG {...props}><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></IconSVG>
        );
        const User = (props) => (
            <IconSVG {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconSVG>
        );

        // --- CONFIGURAÇÃO E VARIÁVEIS GLOBAIS (Fallback para CDN) ---
        // Visto que não estamos em um ambiente de runtime, usamos valores de fallback
        const appId = 'hub-preview';
        const firebaseConfig = {
            apiKey: "AIzaSyDsbiLPBOda119Qr6Ji69j8TZLpiFixBWI",
            authDomain: "list-games-9bddd.firebaseapp.com",
            projectId: "list-games-9bddd",
            storageBucket: "list-games-9bddd.firebasestorage.app",
            messagingSenderId: "756898313156",
            appId: "1:756898313156:web:9bc660d0a2f4cd07882a91",
            measurementId: "G-GLM50YVLXP"
        };
        const initialAuthToken = null;
        
        // --- CÓDIGO DO USUÁRIO ADAPTADO INICIA AQUI ---

        // --- PLACEHOLDERS PARA AS FUTURAS PÁGINAS (VIEWS) ---
        const PlaceholderView = ({ title, icon: Icon, color }) => (
            <div className="p-8 text-center bg-card-bg rounded-xl shadow-2xl min-h-[40vh] flex flex-col justify-center items-center">
                <Icon className={`w-12 h-12 mx-auto mb-4 ${color}`} />
                <h2 className="text-3xl font-bold text-text-light mb-4">{title}</h2>
                <p className="text-lg text-text-secondary">
                    Esta é a página **{title}**. Você pode preenchê-la com sua lógica de dados real e UI.
                </p>
                <p className="text-sm text-yellow-400 mt-2">
                    Status: Componente Placeholder.
                </p>
            </div>
        );

        // --- Componente de Navegação (Sidebar & Bottom Bar) ---
        const NavigationBar = ({ currentView, setCurrentView, isMobile }) => {
            const views = [
                { id: 'home', label: 'Home', icon: HomeIcon },
                { id: 'games', label: 'Games', icon: Gamepad, link: 'games_manager.html' },
                { id: 'hqs', label: 'HQs', icon: Gamepad, link: 'hqs_manager.html' },
                { id: 'lists', label: 'Listas', icon: List, link: 'Lists.html' },
                { id: 'academia', label: 'Academia', icon: Dumbbell, link: 'academia_manager.html' },
            ];

            if (isMobile) {
                return (
                    <nav className="fixed inset-x-0 bottom-0 bg-card-bg border-t border-gray-600 shadow-2xl z-40">
                        <div className="flex justify-around">
                            {views.map(view => (
                                <button
                                    key={view.id}
                                    onClick={() => setCurrentView(view.id)}
                                    className={`p-3 flex-1 flex flex-col items-center transition duration-200 
                                        ${currentView === view.id ? 'text-primary' : 'text-gray-400 hover:text-white'}`}
                                >
                                    <view.icon className="w-6 h-6" />
                                    <span className="text-xs mt-1 capitalize">{view.id}</span>
                                </button>
                            ))}
                        </div>
                    </nav>
                );
            }
            
            // Desktop Sidebar
            return (
                <nav className="w-64 bg-card-bg h-screen fixed p-4 shadow-xl">
                    <h1 className="text-2xl font-bold text-white mb-8 border-b border-gray-600 pb-4">
                        <HomeIcon className="inline w-6 h-6 mr-2 text-primary" /> Meu Hub
                    </h1>
                    <ul className="space-y-2">
                        {views.map(view => (
                            <li key={view.id}>
                                <button
                                    onClick={() => setCurrentView(view.id)}
                                    className={`flex items-center w-full p-3 rounded-xl transition duration-200 
                                        ${currentView === view.id ? 'bg-primary/20 text-white' : 'text-gray-400 hover:bg-gray-800 hover:text-white'}`}
                                >
                                    <view.icon className={`w-5 h-5 mr-3 ${view.color}`} />
                                    <span className="font-medium">{view.label}</span>
                                </button>
                            </li>
                        ))}
                    </ul>
                </nav>
            );
        };


        // --- COMPONENTE PRINCIPAL (APP) ---
        const App = () => {
            const [currentView, setCurrentView] = useState('home');
            const [userId, setUserId] = useState(null);
            const [db, setDb] = useState(null);
            const [loading, setLoading] = useState(true);

            // 1. Inicialização do Firebase e Autenticação
            useEffect(() => {
                try {
                    // Prevenindo erro de inicialização se firebaseConfig estiver vazio no preview
                    if (Object.keys(firebaseConfig).length === 0) {
                        setUserId('PREVIEW_USER_ID');
                        setLoading(false);
                        return;
                    }

                    // As funções do Firebase são usadas aqui
                    const app = initializeApp(firebaseConfig);
                    const firestore = getFirestore(app);
                    const firebaseAuth = getAuth(app);
                    
                    setDb(firestore);

                    const authenticate = async () => {
                        try {
                            if (initialAuthToken) {
                                const userCredential = await signInWithCustomToken(firebaseAuth, initialAuthToken);
                                setUserId(userCredential.user.uid);
                            } else {
                                const userCredential = await signInAnonymously(firebaseAuth);
                                setUserId(userCredential.user.uid);
                            }
                        } catch (error) {
                            console.error("Erro na autenticação Firebase:", error);
                        }
                        setLoading(false);
                    };

                    onAuthStateChanged(firebaseAuth, user => { // Usando onAuthStateChanged com a instância auth
                        if (user) {
                            setUserId(user.uid);
                        }
                    });

                    authenticate();
                } catch (error) {
                    console.error("Erro na inicialização do Firebase:", error);
                    setLoading(false); 
                }
            }, []);

            // Função que decide qual componente de visualização mostrar
            const renderView = () => {
                if (loading) {
                    return (
                        <div className="text-center py-10">
                            <div className="animate-spin inline-block w-8 h-8 border-4 border-primary border-t-transparent rounded-full"></div>
                            <p className="text-gray-400 mt-4">Inicializando o Hub...</p>
                        </div>
                    );
                }

                switch (currentView) {
                    case 'hqs':
                        window.location.href = "hqs_manager.html";
                        return null;

                    case 'games':
                        window.location.href = "games_manager.html";
                        return null;

                    case 'lists':
                        window.location.href = "Lists.html"; // Vai para a página Lists
                        return null;

                    case 'academia':
                        return <PlaceholderView title="Academia" icon={Dumbbell} color="text-primary" />;

                    case 'home':
                    default:
                        return (
                            <div className="p-8 bg-card-bg rounded-xl shadow-2xl">
                                <h2 className="text-4xl font-extrabold text-primary mb-4">Bem-vindo(a) ao seu Hub Pessoal!</h2>
                            </div>
                        );
                }
            };

            return (
                <div className="flex bg-background min-h-screen text-text-light">
                    {/* Navegação Lateral (Desktop) */}
                    <div className="hidden md:block">
                        <NavigationBar currentView={currentView} setCurrentView={setCurrentView} isMobile={false} />
                    </div>

                    {/* Conteúdo Principal */}
                    <div className="flex-1 p-4 pb-20 md:ml-64 md:p-8">
                        {renderView()}
                    </div>

                    {/* Navegação Inferior (Mobile) */}
                    <div className="md:hidden">
                        <NavigationBar currentView={currentView} setCurrentView={setCurrentView} isMobile={true} />
                    </div>
                </div>
            );
        };

        // --- RENDERIZAÇÃO ---
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>
